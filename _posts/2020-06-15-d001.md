---
title : "Cluster Computing Architecture"
excerpt : "MapReduce(1)"
categories :	
 - Data Mining
 - MapReduce
tags :
 - Cluster Computing
 - Compute Node
---

> 해당 포스팅은 스탠포드의 Anand Rajaraman 교수님의 [강의](https://www.youtube.com/watch?v=xoA5v9AO7S0&list=PLLssT5z_DsK9JDLcT8T62VtzwyW9LNepV&index=2&t=1s) 와 Mining of Massive Datasets(Jure Leskovec, Anand Rajaraman, Jeff Ullman) [책](http://www.mmds.org/) 을 참고하였습니다.



대부분의 계산(=Computation) 은 하나의 프로세서에서 수행됩니다. 

이 계산은 메인 메모리와 캐시, 디스크를 갖고 수행됩니다. 

( 이러한 구성을 **컴퓨트 노드**(=compute node) 라고 합니다. )



시대에 따라 데이터의 규모가 커지면서 이러한 수행방식은 한계를 갖게 됩니다. 



구글 웹 검색 엔진을 예로 들어 봅시다. 

100억개의 웹 페이지가 있고,

웹 페이지  하나 당 20kB 로 간주한다면

한 번 검색을 수행할 때 200TB 의 데이터를 처리해야합니다. 

CPU가 데이터를 disk 에서 읽어 오는데에는 시간이 소요되고,

시간 당 데이터를 읽어 오는 양을 데이터 대역폭(=Data bandwidth) 라고 합니다.

이 대역폭을 50m/s (1초당 50MB) 이라 가정한다면,

웹 페이지 전부를 읽는데 46일 이상이 소요됩니다. 



이렇게 기존의 방식은 대규모 데이터를 처리하는데 있어서 큰 어려움이 있고, 실 사용이 어렵습니다.



이를 위한 대안으로 **클러스터 컴퓨팅** (=Cluster computing) 이 제시 되었습니다. 

클러스터 컴퓨팅은 여러대의 컴퓨터를 연결하여 작업들을 병렬적으로 처리하는 구조입니다. 

클러스터 컴퓨팅을 위해서는 

컴퓨트 노드를 이에 맞춰 구성해야하고(**하드웨어**), 

**분산 파일 시스템**(=distributed file system) 이 필요하며

이를 다루기 위한 **맵리듀스**(=MapReduce) 가 필요합니다. 

 

이번 포스팅에서는 클러스터 컴퓨팅을 위한 

컴퓨트 노드 구성과 분산 파일 시스템에 대해 이야기해보자 합니다.



## 클러스터 컴퓨팅을 위한 컴퓨트 노드 구성

클러스터 컴퓨팅의 구조는 다음과 같이 구성됩니다. 

컴퓨트 노드는 랙(=racks) 에 보관됩니다. 

8에서 64개의 노드가 하나의 랙에 보관됩니다. 

![cc_hardware structure](/assets/img/d001/01.png)



하나의 랙에 있는 노드들은 하나의 네트워크로 연결됩니다. 

일반적으로 연결은 GB 통신이 가능한 이더넷(=Ethernet)으로 연결됩니다. 

여러개의 노드가 연결된 랙은, 여러개가 있을 수 있고, 그 여러개의 랙들은 다른 레벨의 네트워크나 스위치로 연결됩니다. 

다음 그림과 같이 트리구조로 만들어집니다.

![cc_hardware structure](/assets/img/d001/02.png)

랙 간(inter-rack) 대역폭은 랙 내부의 이더넷의(intrarack) 대역폭 보다 더 높습니다. 

그러나 랙 간의 통신이 필요한 노드들의 쌍의 수가 주어진다면 이 랙 간 대역폭은 더 높아야 합니다. 



다시 구글 웹 검색 엔진을 생각해 봅시다. 

단일 컴퓨트 노드로는 10TB 의 데이터를 처리하기 위해서 46일 이상이 소요되었습니다.

예를 들어 64개의 컴퓨트 노드가 있는 랙을 64개를 사용한다고 가정하면 ($$2^{12}$$),

46일이 걸리는 작업을 1000초 이내로 수행할 수 있게 됩니다. 



이렇게 컴퓨트 노드를 합쳐서 만들면 병렬 계산이 가능해집니다. 

그러나 단순히 합치는 방법으로는 여러 문제들이 발생하게됩니다. 

이를 해결하기 위해서는 분산 파일 시스템과 맵리듀스가 필요합니다. 

다음 포스팅에는 클러스터링 시 발생하는 문제들과

그에 따른 해결 방식 중 하나인 **분산 파일 시스템**에 대해 다뤄보겠습니다. 







 